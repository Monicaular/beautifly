<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        const handleEnableDisable = (itemId) => {
            const qtyInput = document.getElementById(`quantity`);
            const decrementBtn = document.getElementById(`decrement-qty_${itemId}`);
            const incrementBtn = document.getElementById(`increment-qty_${itemId}`);
            const currentValue = parseInt(qtyInput.value, 10);
            const minusDisabled = currentValue < 2;
            const plusDisabled = currentValue > 98;

            decrementBtn.disabled = minusDisabled;
            incrementBtn.disabled = plusDisabled;
        };

        const itemId = '{{ product.id }}';
        handleEnableDisable(itemId);

        document.querySelectorAll('.qty_input').forEach((input) => {
            input.addEventListener('change', () => {
                handleEnableDisable(input.dataset.item_id);
            });
        });

        document.querySelectorAll('.increment-qty').forEach((button) => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const input = button.closest('.input-group').querySelector('.qty_input');
                input.value = parseInt(input.value, 10) + 1;
                handleEnableDisable(button.dataset.item_id);
            });
        });

        document.querySelectorAll('.decrement-qty').forEach((button) => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const input = button.closest('.input-group').querySelector('.qty_input');
                input.value = parseInt(input.value, 10) - 1;
                handleEnableDisable(button.dataset.item_id);
            });
        });
    });
</script>